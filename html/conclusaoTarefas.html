<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Horta - Guia de Plantio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .transition-garden {
            transition: all 0.3s ease;
        }

        .shadow-garden {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .text-garden-secondary {
            color: #2f4f4f;
        }

        .bg-garden-success {
            background-color: #10b981;
        }

        .text-garden-success {
            color: #10b981;
        }

        .border-garden-primary-light {
            border-color: rgba(100, 116, 139, 0.2);
        }

        .text-muted-foreground {
            color: #6b7280;
        }

        .bg-garden-primary {
            background-color: #10b981;
        }

        .bg-garden-primary-light {
            background-color: rgba(16, 185, 129, 0.1);
        }

        .step-card {
            background: white;
            border-radius: 12px;
            border: 2px solid rgba(100, 116, 139, 0.1);
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .step-card.completed {
            border-color: #10b981;
            background-color: rgba(16, 185, 129, 0.05);
        }

        .step-card.locked {
            opacity: 0.6;
            pointer-events: none;
        }

        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 1rem;
        }

        .step-card.completed .step-number {
            background-color: #10b981;
            color: white;
        }

        .progress-bar {
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin: 2rem 0;
        }

        .progress-fill {
            height: 100%;
            background-color: #10b981;
            width: 0%;
            transition: width 0.5s ease;
        }

        .checkmark {
            width: 24px;
            height: 24px;
            border: 2px solid #d1d5db;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkmark.checked {
            background-color: #10b981;
            border-color: #10b981;
            color: white;
        }

        .material-icon {
            font-size: 1.25rem;
            margin-right: 0.5rem;
        }
    </style>
</head>

<body class="bg-green-50 min-h-screen flex flex-col items-center p-6">
    <div class="max-w-4xl w-full">
        <header class="mb-8 text-center">
            <div class="flex items-center justify-center gap-3 mb-4">
                <span class="text-4xl">üå±</span>
                <h1 class="text-4xl font-bold text-garden-secondary">Guia de Plantio</h1>
            </div>
            <div id="plant-info" class="bg-white rounded-lg p-6 shadow-garden">
                <h2 class="text-2xl font-bold text-garden-secondary mb-2" id="plant-name">Carregando...</h2>
                <p class="text-muted-foreground" id="plant-description"></p>
            </div>
        </header>

        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>

        <div id="steps-container" class="space-y-4">
            <!-- Passos ser√£o inseridos dinamicamente -->
        </div>

        <div class="text-center mt-12">
            <button id="finish-planting"
                class="bg-garden-primary text-white font-semibold py-3 px-8 rounded-lg hover:bg-garden-success/80 transition-garden text-lg disabled:opacity-50 disabled:cursor-not-allowed"
                disabled>
                üåü Finalizar Plantio
            </button>
            <a href="escolher-plantas.html" class="ml-4 text-garden-secondary hover:underline">‚Üê Voltar</a>
        </div>

        <footer class="mt-12 text-center text-muted-foreground">
            ¬© 2024 Minha Horta. Todos os direitos reservados.
        </footer>
    </div>

    <script>
        // Base de dados com guias de plantio
        const guiasPlantio = {
            'espinafre': {
                nome: 'Espinafre',
                descricao: 'Folha verde rica em ferro, vitamina A e K, cresce r√°pido e suporta bem sombra parcial. Colheita cont√≠nua a partir de 30‚Äì40 dias.',
                passos: [
                    {
                        titulo: 'Prepara√ß√£o do Vaso',
                        descricao: 'Use vaso de 15‚Äì30 L (m√≠nimo 25 cm de profundidade). Misture 50% terra vegetal + 30% composto org√¢nico + 20% h√∫mus de minhoca. pH ideal 6,3‚Äì7,0. Espinafre gosta de solo rico em mat√©ria org√¢nica e bem drenado.',
                        duracao: '15‚Äì25 minutos',
                        materiais: ['Vaso com furos de drenagem', 'Terra vegetal', 'Composto org√¢nico', 'H√∫mus de minhoca', 'Camada de drenagem (argila expandida ou brita)']
                    },
                    {
                        titulo: 'Plantio',
                        descricao: 'Semeie direto no vaso a 1 cm de profundidade, espa√ßamento 15‚Äì20 cm entre plantas (8‚Äì12 plantas em vaso de 30 L). Pode fazer linhas ou espalhar e depois raleie. Germina√ß√£o em 5‚Äì10 dias. Temperatura ideal 15‚Äì22 ¬∞C.',
                        duracao: '15‚Äì20 minutos',
                        materiais: ['Sementes de espinafre (variedades recomendadas: Viroflay, Space, Nova Zel√¢ndia)', 'Regador com chuveirinho fino']
                    },
                    {
                        titulo: 'Rega e Cuidados Di√°rios',
                        descricao: 'Mantenha o solo constantemente √∫mido (nunca encharcado). Regue de prefer√™ncia pela manh√£ ou final da tarde. Em dias muito quentes, regue 2x/dia. Evite molhar as folhas para reduzir risco de fungos. Colha folhas externas a partir de 30‚Äì40 dias, deixando o centro crescer (colheita cont√≠nua por at√© 3‚Äì4 meses).',
                        duracao: '5‚Äì10 minutos/dia',
                        materiais: ['Regador ou mangueira com bico fino', 'Cobertura morta opcional (palha ou folhas secas)']
                    },
                ]
            },
            'alface': {
                nome: 'Alface',
                descricao: 'Folha verde f√°cil e r√°pida, ideal para vasos e colheita cont√≠nua.',
                passos: [
                    {
                        titulo: 'Prepara√ß√£o do Vaso',
                        descricao: 'Use vaso de 15‚Äì25 L (30‚Äì40 cm de di√¢metro). Misture 50% terra vegetal + 30% composto org√¢nico + 20% h√∫mus de minhoca ou esterco curtido. pH ideal 6,0‚Äì7,0.',
                        duracao: '15‚Äì20 minutos',
                        materiais: ['Vaso com furos', 'Terra vegetal', 'Composto org√¢nico ou h√∫mus', 'Argila expandida ou cacos no fundo']
                    },
                    {
                        titulo: 'Plantio',
                        descricao: 'Plante 4‚Äì6 plantas por vaso (espa√ßamento ‚âà 15‚Äì20 cm). Semeie a 0,5 cm ou use mudas prontas. Colheita baby em 25‚Äì35 dias, cabe√ßa em 45‚Äì60 dias.',
                        duracao: '10‚Äì15 minutos',
                        materiais: ['Sementes ou mudas de alface', 'Regador com chuveirinho']
                    },
                    {
                        titulo: 'Rega',
                        descricao: 'Mantenha o solo sempre √∫mido, mas nunca encharcado. Regue todo dia de manh√£ em dias quentes. Use pratinho embaixo s√≥ nos primeiros 10 dias.',
                        duracao: '5 minutos/dia',
                        materiais: ['Regador ou garrafa pet com furos']
                    }
                ]
            },
            'rucula': {
                nome: 'R√∫cula',
                descricao: 'Sabor picante intenso, cresce r√°pido em qualquer vaso.',
                passos: [
                    {
                        titulo: 'Prepara√ß√£o do Vaso',
                        descricao: 'Vaso de 10‚Äì20 L basta. Misture 60% terra + 40% composto. Gosta de drenagem boa.',
                        duracao: '10‚Äì15 minutos',
                        materiais: ['Vaso raso', 'Terra + composto', 'Areia ou perlita (opcional)']
                    },
                    {
                        titulo: 'Plantio',
                        descricao: 'Espalhe as sementes na superf√≠cie e cubra com 2‚Äì3 mm de terra. D√° para colocar 8‚Äì12 plantas num vaso de 30 cm. Colheita baby em 20‚Äì30 dias.',
                        duracao: '5‚Äì10 minutos',
                        materiais: ['Sementes de r√∫cula', 'Peneirinha para cobrir']
                    },
                    {
                        titulo: 'Rega',
                        descricao: 'Rega di√°ria leve (n√©voa). Se o vaso secar vira amarga e sobe r√°pido.',
                        duracao: '5 minutos/dia',
                        materiais: ['Regador fino ou borrifador']
                    }
                ]
            },
            'couve': {
                nome: 'Couve',
                descricao: 'D√° para cultivar em vaso grande e colher folha por folha por meses.',
                passos: [
                    {
                        titulo: 'Prepara√ß√£o do Vaso',
                        descricao: 'Vaso de no m√≠nimo 20‚Äì30 L (m√≠nimo 30 cm profundidade). 50% terra + 50% composto ou esterco curtido.',
                        duracao: '20 minutos',
                        materiais: ['Vaso grande', 'Terra vegetal', 'Composto rico']
                    },
                    {
                        titulo: 'Plantio',
                        descricao: '1 planta por vaso de 30 L ou 2 plantas em vaso de 50 L. Use muda com 4‚Äì6 folhas. Enterre at√© o colo.',
                        duracao: '10 minutos',
                        materiais: ['Muda de couve', 'Regador']
                    },
                    {
                        titulo: 'Rega e Colheita',
                        descricao: 'Regue 2‚Äì3√ó por semana (solo √∫mido, n√£o encharcado). Comece a colher as folhas de baixo depois de 50‚Äì60 dias ‚Äî a planta continua produzindo.',
                        duracao: '5 minutos, 2‚Äì3√ó/semana',
                        materiais: ['Tesoura limpa para colher']
                    }
                ]
            },
            'manjericao': {
                nome: 'Manjeric√£o',
                descricao: 'Erva mais f√°cil do mundo em vaso. Sol pleno = cheiroso o dia todo.',
                passos: [
                    {
                        titulo: 'Prepara√ß√£o',
                        descricao: 'Vaso de 10‚Äì15 L. Terra leve + bastante composto. Coloque argila expandida no fundo.',
                        duracao: '10 minutos',
                        materiais: ['Vaso', 'Terra + composto', 'Drenagem']
                    },
                    {
                        titulo: 'Plantio',
                        descricao: '3‚Äì5 mudas por vaso de 25 cm ou semeie direto. Belisque o broto central quando tiver 15 cm para ramificar.',
                        duracao: '10 minutos',
                        materiais: ['Mudas ou sementes', 'Tesoura']
                    },
                    {
                        titulo: 'Cuidados',
                        descricao: 'Regue quando a terra estiver seca 2 cm abaixo da superf√≠cie (2‚Äì3√ó por semana). Colha sempre as pontas para estimular crescimento.',
                        duracao: '5 minutos, 2‚Äì3√ó/semana'
                    }
                ]
            },
            'salsa': {
                nome: 'Salsa',
                descricao: 'Demora germinar, mas depois vive anos no vaso.',
                passos: [
                    {
                        titulo: 'Prepara√ß√£o',
                        descricao: 'Vaso 15‚Äì20 L. Terra rica e fofa. Deixe sementes de molho 24 h para acelerar.',
                        duracao: '15 minutos',
                        materiais: ['Vaso', 'Terra + composto']
                    },
                    {
                        titulo: 'Plantio',
                        descricao: 'Espalhe sementes na superf√≠cie, cubra com 3‚Äì5 mm de terra. 6‚Äì10 plantas por vaso m√©dio.',
                        duracao: '10 minutos',
                        materiais: ['Sementes (de molho)', 'Regador fino']
                    },
                    {
                        titulo: 'Rega',
                        descricao: 'Mantenha √∫mido constante por 15‚Äì25 dias at√© germinar. Depois rega normal.',
                        duracao: '5‚Äì10 minutos/dia no in√≠cio'
                    }
                ]
            },
            'cebolinha': {
                nome: 'Cebolinha',
                descricao: 'A campe√£ dos vasos pequenos. Uma touceira rende para sempre.',
                passos: [
                    {
                        titulo: 'Prepara√ß√£o',
                        descricao: 'Qualquer vaso a partir de 5 L serve. Terra normal + composto.',
                        duracao: '5 minutos',
                        materiais: ['Vaso pequeno', 'Terra comum']
                    },
                    {
                        titulo: 'Plantio',
                        descricao: 'Divida uma touceira do mercado em 3‚Äì4 partes e plante. Ou use sementes (mais demorado).',
                        duracao: '5 minutos',
                        materiais: ['Touceira ou sementes', 'Faca']
                    },
                    {
                        titulo: 'Colheita',
                        descricao: 'Corte a 3 cm do solo quando atingir 15‚Äì20 cm. Volta em 15 dias. Regue 2‚Äì3√ó por semana.',
                        duracao: '2 minutos sempre que precisar'
                    }
                ]
            },
            'alecrim': {
                nome: 'Alecrim',
                descricao: 'Arbusto que vive anos em vaso, ama sol e odeia excesso de √°gua.',
                passos: [
                    {
                        titulo: 'Prepara√ß√£o',
                        descricao: 'Vaso 15‚Äì25 L com MUITA drenagem. Misture 50% terra + 30% areia grossa + 20% composto.',
                        duracao: '15 minutos',
                        materiais: ['Vaso com furos grandes', 'Areia grossa', 'Argila expandida']
                    },
                    {
                        titulo: 'Plantio',
                        descricao: '1 muda por vaso. Enterre s√≥ at√© o colo. Melhor fazer estaquia do que comprar muda ruim.',
                        duracao: '10 minutos',
                        materiais: ['Estaca ou muda saud√°vel']
                    },
                    {
                        titulo: 'Rega',
                        descricao: 'Regue s√≥ quando a terra estiver bem seca (a cada 7‚Äì10 dias no ver√£o, 15 dias no inverno). Nunca deixe √°gua no pratinho.',
                        duracao: '5 minutos, 1√ó por semana ou menos'
                    }
                ]
            }
        };

        // variaveis de estado
        let plantaAtual = '';
        let passosConcluidos = 0;
        let totalPassos = 0;

        // funcoes principais
        function carregarGuiaPlantio() {
            const parametrosUrl = new URLSearchParams(window.location.search);
            const idPlanta = parametrosUrl.get('plant');

            // verifica se a planta existe
            if (!idPlanta || !guiasPlantio[idPlanta]) {
                document.getElementById('plant-name').textContent = 'Planta n√£o encontrada';
                document.getElementById('plant-description').textContent = 'Volte e selecione uma planta v√°lida.';
                return;
            }

            // carrega os dados da planta
            plantaAtual = idPlanta;
            const guia = guiasPlantio[idPlanta];

            // atualiza o cabe√ßalho
            document.getElementById('plant-name').textContent = guia.nome;
            document.getElementById('plant-description').textContent = guia.descricao;

            // renderiza os passos
            totalPassos = guia.passos.length;
            renderizarPassos(guia.passos);
            atualizarProgresso();
        }

        // renderiza os passos do guia
        function renderizarPassos(passos) {
            const container = document.getElementById('steps-container');
            container.innerHTML = '';

            // cria cada passo
            passos.forEach((passo, indice) => {
                const numeroPasso = indice + 1;
                const bloqueado = indice > 0; // Primeiro passo sempre liberado

                // HTML do passo, dps do primeiro check, nao aparece mais o ‚úì, aparece a palavra Check, nao consegui resolver isso
                // caso vc ser humano que estiver vendo esse codigo por algum motivo, tenta resolver ai namoral
                const htmlPasso = `
                <div class="step-card ${bloqueado ? 'locked' : ''}" id="passo-${numeroPasso}">
                    <div class="flex items-start">
                        <div class="step-number">${numeroPasso}</div>
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-xl font-semibold text-garden-secondary">${passo.titulo}</h3>
                                <div class="checkmark" data-passo="${numeroPasso}">
                                    ${!bloqueado ? '‚úì' : ''}
                                </div>
                            </div>
                            <p class="text-muted-foreground mb-4">${passo.descricao}</p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                <div>
                                    <strong class="text-garden-secondary">Dura√ß√£o:</strong>
                                    <span class="text-muted-foreground ml-2">${passo.duracao}</span>
                                </div>
                                <div>
                                    <strong class="text-garden-secondary">Materiais Necess√°rios:</strong>
                                    <div class="text-muted-foreground mt-1">
                                        ${passo.materiais.map(material => `
                                            <div class="flex items-center mb-1">
                                                <span class="material-icon">üìå</span>
                                                <span>${material}</span>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // adiciona o passo ao container
                container.innerHTML += htmlPasso;
            });

            // adiciona clique nos checkmarks dos passos liberados
            document.querySelectorAll('.checkmark').forEach(marca => {

                // s√≥ adiciona evento se o passo n estiver bloqueado
                if (!marca.closest('.step-card.locked')) {
                    marca.addEventListener('click', function () {
                        const num = parseInt(this.getAttribute('data-passo'));
                        alternarConclusaoPasso(num);
                    });
                }
            });
        }

        // alterna o status de conclus√£o de um passo
        function alternarConclusaoPasso(numeroPasso) {
            const cardPasso = document.getElementById(`passo-${numeroPasso}`);
            const checkmark = cardPasso.querySelector('.checkmark');

            // alterna o estado
            if (checkmark.classList.contains('checked')) {
                checkmark.classList.remove('checked');
                cardPasso.classList.remove('completed');
                passosConcluidos--;
            } else {
                // marca como conclu√≠do
                checkmark.classList.add('checked');
                cardPasso.classList.add('completed');
                passosConcluidos++;

                // Libera o pr√≥ximo passo
                if (numeroPasso < totalPassos) {
                    const proximoCard = document.getElementById(`passo-${numeroPasso + 1}`);
                    proximoCard.classList.remove('locked');
                    proximoCard.querySelector('.checkmark').innerHTML = 'Check';

                    proximoCard.querySelector('.checkmark').addEventListener('click', function () {
                        alternarConclusaoPasso(numeroPasso + 1);
                    });
                }
            }

            // atualiza o progresso :)
            atualizarProgresso();
        }

        // atualiza a barra de progresso e o bot√£o de finalizar
        function atualizarProgresso() {
            const progresso = (passosConcluidos / totalPassos) * 100;
            document.getElementById('progress-fill').style.width = `${progresso}%`;

            const botaoFinalizar = document.getElementById('finish-planting');
            botaoFinalizar.disabled = passosConcluidos !== totalPassos;
        }

        // nao sei pq esta aqui ainda, mas vai q um dia eu precise

        // function gerarTarefasIniciais(tipo) {
        //     const tarefas = {
        //         alface: ['Regar hoje', 'Verificar o solo'],
        //         rucula: ['Regar a cada 2 dias', 'Podar folhas velhas'],
        //         couve: ['Regar abundantemente', 'Verificar pragas'],
        //         manjericao: ['Regar diariamente', 'Podar flores'],
        //         salsa: ['Regar a cada 2 dias', 'Colher ramos externos'],
        //         cebolinha: ['Regar regularmente', 'Cortar folhas'],
        //         alecrim: ['Regar a cada 5-7 dias', 'Podar para estimular crescimento'],
        //         default: ['Regar a planta', 'Verificar luz solar']
        //     };
        //     return tarefas[tipo] || tarefas.default;
        // }

        // finaliza o plantio
        function finalizarPlantio() {
            if (passosConcluidos !== totalPassos) {
                alert('Complete todos os passos antes de finalizar!');
                return;
            }

            // Mostra mensagem de sucesso
            const guia = guiasPlantio[plantaAtual];
            alert(`Parab√©ns! Voc√™ plantou ${guia.nome} com sucesso!`);

            // Redireciona para o dashboard/meu jardim
            window.location.href = 'plantacao.html';
        }

        // Eventos
        document.getElementById('finish-planting').addEventListener('click', finalizarPlantio);

        // Carrega o guia ao abrir a p√°gina
        document.addEventListener('DOMContentLoaded', carregarGuiaPlantio);
    </script>
</body>

</html>