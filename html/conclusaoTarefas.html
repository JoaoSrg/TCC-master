<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Horta - Guia de Plantio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .transition-garden {
            transition: all 0.3s ease;
        }

        .shadow-garden {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .text-garden-secondary {
            color: #2f4f4f;
        }

        .bg-garden-success {
            background-color: #10b981;
        }

        .text-garden-success {
            color: #10b981;
        }

        .border-garden-primary-light {
            border-color: rgba(100, 116, 139, 0.2);
        }

        .text-muted-foreground {
            color: #6b7280;
        }

        .bg-garden-primary {
            background-color: #10b981;
        }

        .bg-garden-primary-light {
            background-color: rgba(16, 185, 129, 0.1);
        }

        .step-card {
            background: white;
            border-radius: 12px;
            border: 2px solid rgba(100, 116, 139, 0.1);
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .step-card.completed {
            border-color: #10b981;
            background-color: rgba(16, 185, 129, 0.05);
        }

        .step-card.locked {
            opacity: 0.6;
            pointer-events: none;
        }

        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 1rem;
        }

        .step-card.completed .step-number {
            background-color: #10b981;
            color: white;
        }

        .progress-bar {
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin: 2rem 0;
        }

        .progress-fill {
            height: 100%;
            background-color: #10b981;
            width: 0%;
            transition: width 0.5s ease;
        }

        .checkmark {
            width: 24px;
            height: 24px;
            border: 2px solid #d1d5db;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkmark.checked {
            background-color: #10b981;
            border-color: #10b981;
            color: white;
        }

        .material-icon {
            font-size: 1.25rem;
            margin-right: 0.5rem;
        }
    </style>
</head>

<body class="bg-green-50 min-h-screen flex flex-col items-center p-6">
    <div class="max-w-4xl w-full">
        <header class="mb-8 text-center">
            <div class="flex items-center justify-center gap-3 mb-4">
                <span class="text-4xl">üå±</span>
                <h1 class="text-4xl font-bold text-garden-secondary">Guia de Plantio</h1>
            </div>
            <div id="plant-info" class="bg-white rounded-lg p-6 shadow-garden">
                <h2 class="text-2xl font-bold text-garden-secondary mb-2" id="plant-name">Carregando...</h2>
                <p class="text-muted-foreground" id="plant-description"></p>
            </div>
        </header>

        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>

        <div id="steps-container" class="space-y-4">
            <!-- Passos ser√£o inseridos dinamicamente -->
        </div>

        <div class="text-center mt-12">
            <button id="finish-planting"
                class="bg-garden-primary text-white font-semibold py-3 px-8 rounded-lg hover:bg-garden-success/80 transition-garden text-lg disabled:opacity-50 disabled:cursor-not-allowed"
                disabled>
                üåü Finalizar Plantio
            </button>
            <a href="escolher-plantas.html" class="ml-4 text-garden-secondary hover:underline">‚Üê Voltar</a>
        </div>

        <footer class="mt-12 text-center text-muted-foreground">
            ¬© 2024 Minha Horta. Todos os direitos reservados.
        </footer>
    </div>

    <script>
        // Base de dados com guias de plantio
        const guiasPlantio = {
            // VERDURAS
            'alface': {
                nome: 'Alface',
                descricao: 'Folha verde f√°cil de cultivar, ideal para saladas frescas.',
                passos: [
                    {
                        titulo: 'Prepara√ß√£o do Solo',
                        descricao: 'Prepare um solo argiloso profundo, bem drenado e rico em mat√©ria org√¢nica (pH 6,0-7,0). Incorpore 15-20 t/ha de composto org√¢nico ou esterco curtido 5-10 dias antes.',
                        duracao: '30-45 minutos',
                        materiais: ['Vaso ou canteiro', 'Terra argilosa', 'Composto org√¢nico ou esterco curtido', 'P√° pequena', 'An√°lise de solo (opcional)']
                    },
                    {
                        titulo: 'Plantio das Sementes',
                        descricao: 'Fa√ßa covas de 0,5-1 cm de profundidade com espa√ßamento de 25-30 cm entre plantas e 30 cm entre linhas; coloque 2-3 sementes por cova e cubra levemente.',
                        duracao: '20-30 minutos',
                        materiais: ['Sementes de alface', 'Regador', 'Fita m√©trica para espa√ßamento']
                    },
                    {
                        titulo: 'Rega Inicial',
                        descricao: 'Regue suavemente para umedecer o solo sem encharcar. Mantenha √∫mido constante nos primeiros 7-10 dias para germina√ß√£o.',
                        duracao: '10 minutos',
                        materiais: ['Regador com √°gua morna']
                    }
                ]
            },
            'rucula': {
                nome: 'R√∫cula',
                descricao: 'Folhagem picante e nutritiva, perfeita para saladas.',
                passos: [
                    {
                        titulo: 'Prepara√ß√£o do Solo',
                        descricao: 'Use solo leve, bem drenado e rico em org√¢nicos (pH 6,0-7,0). Adicione composto para melhorar fertilidade; germina√ß√£o em 3-5 dias.',
                        duracao: '25-35 minutos',
                        materiais: ['Vaso ou canteiro', 'Terra leve', 'Composto org√¢nico', 'Areia para drenagem']
                    },
                    {
                        titulo: 'Plantio das Sementes',
                        descricao: 'Espalhe sementes uniformemente a 0,5 cm de profundidade, com espa√ßamento de 25 cm entre linhas; cubra finamente (0,2 g/m linear).',
                        duracao: '15-20 minutos',
                        materiais: ['Sementes de r√∫cula', 'Regador', 'Peneira fina para cobertura']
                    },
                    {
                        titulo: 'Rega Inicial',
                        descricao: 'Regue com n√©voa fina para evitar deslocar sementes. Mantenha √∫mido, mas drenado, especialmente em climas quentes.',
                        duracao: '10 minutos',
                        materiais: ['Regador com bico fino']
                    }
                ]
            },
            'couve': {
                nome: 'Couve',
                descricao: 'Folhagem verde e robusta, muito vers√°til na cozinha.',
                passos: [
                    {
                        titulo: 'Prepara√ß√£o do Solo',
                        descricao: 'Solo profundo, f√©rtil e drenado (pH 6,0-7,0). Incorpore 15-20 t/ha de esterco curtido ou composto, mais 50-100 g superfosfato por cova.',
                        duracao: '35-50 minutos',
                        materiais: ['Vaso grande ou canteiro', 'Terra f√©rtil', 'Esterco curtido ou composto', 'P√°', 'Superfosfato simples']
                    },
                    {
                        titulo: 'Plantio das Mudas',
                        descricao: 'Plante mudas com 4-6 folhas verdadeiras, espa√ßamento de 50-70 cm entre plantas e linhas; enterre at√© a base das folhas.',
                        duracao: '30-40 minutos',
                        materiais: ['Mudas de couve (4-6 folhas)', 'Regador', 'Fita m√©trica']
                    },
                    {
                        titulo: 'Rega Inicial',
                        descricao: 'Regue abundantemente para assentar o solo. Mantenha √∫mido constante, regando a cada 2-3 dias.',
                        duracao: '15 minutos',
                        materiais: ['Regador com √°gua']
                    }
                ]
            },
            // TEMPEROS
            'manjericao': {
                nome: 'Manjeric√£o',
                descricao: 'Erva arom√°tica perfeita para molhos e temperos.',
                passos: [
                    {
                        titulo: 'Prepara√ß√£o do Solo',
                        descricao: 'Solo leve, drenado e rico em org√¢nicos (pH 6,0-7,5). Adicione composto; adapta-se a climas quentes e √∫midos.',
                        duracao: '25-35 minutos',
                        materiais: ['Vaso com furos', 'Terra leve', 'Areia para drenagem', 'Composto org√¢nico']
                    },
                    {
                        titulo: 'Plantio das Sementes/Mudas',
                        descricao: 'Semeie superficialmente (0,5 cm) ou plante mudas com espa√ßamento de 20-30 cm; rale para 2-3 plantas por local.',
                        duracao: '20-25 minutos',
                        materiais: ['Sementes ou mudas de manjeric√£o', 'Regador', 'Tesoura para raleio']
                    },
                    {
                        titulo: 'Rega Inicial',
                        descricao: 'Regue moderadamente para umedecer; evite encharcamento, regando 2-3 vezes/semana.',
                        duracao: '10 minutos',
                        materiais: ['Regador com √°gua']
                    }
                ]
            },
            'salsa': {
                nome: 'Salsa',
                descricao: 'Erva arom√°tica vers√°til para diversos pratos.',
                passos: [
                    {
                        titulo: 'Prepara√ß√£o do Solo',
                        descricao: 'Solo f√©rtil, drenado e rico em org√¢nicos (pH 6,0-7,0). Incorpore composto; germina√ß√£o lenta (14-21 dias).',
                        duracao: '20-30 minutos',
                        materiais: ['Vaso ou canteiro', 'Terra f√©rtil', 'Composto org√¢nico', 'Calc√°rio para pH (se necess√°rio)']
                    },
                    {
                        titulo: 'Plantio das Sementes',
                        descricao: 'Semeie superficialmente (0,5 cm), cubra levemente e mantenha √∫mido; espa√ßamento final de 15-20 cm ap√≥s raleio.',
                        duracao: '15-20 minutos',
                        materiais: ['Sementes de salsa (de molho 24h opcional)', 'Regador', 'Peneira fina']
                    },
                    {
                        titulo: 'Rega Inicial',
                        descricao: 'Mantenha solo constantemente √∫mido durante germina√ß√£o (rega di√°ria leve nos primeiros 20 dias).',
                        duracao: '10 minutos',
                        materiais: ['Regador com √°gua']
                    }
                ]
            },
            'cebolinha': {
                nome: 'Cebolinha',
                descricao: 'Tempero vers√°til para saladas, sopas e omeletes.',
                passos: [
                    {
                        titulo: 'Prepara√ß√£o do Solo',
                        descricao: 'Solo drenado, f√©rtil e rico em org√¢nicos (pH 6,0-7,0). Adicione composto; ideal para vasos pequenos.',
                        duracao: '20-25 minutos',
                        materiais: ['Vaso pequeno', 'Terra drenada', 'Composto org√¢nico']
                    },
                    {
                        titulo: 'Plantio das Mudas/Sementes',
                        descricao: 'Plante mudas ou divida touceiras com espa√ßamento de 10-15 cm; por sementes, superficialmente.',
                        duracao: '15 minutos',
                        materiais: ['Mudas ou sementes de cebolinha', 'Regador', 'Faca para divis√£o']
                    },
                    {
                        titulo: 'Rega Inicial',
                        descricao: 'Regue bem para assentar; mantenha √∫mido, regando a cada 2 dias em climas amenos.',
                        duracao: '10 minutos',
                        materiais: ['Regador com √°gua']
                    }
                ]
            },
            'alecrim': {
                nome: 'Alecrim',
                descricao: 'Arbusto arom√°tico resistente para carnes e assados.',
                passos: [
                    {
                        titulo: 'Prepara√ß√£o do Solo',
                        descricao: 'Solo arenoso, bem drenado e pobre em org√¢nicos (pH 6,0-7,5); adicione areia se necess√°rio.',
                        duracao: '20-30 minutos',
                        materiais: ['Vaso com boa drenagem', 'Terra arenosa', 'Areia grossa', 'Argila expandida para fundo']
                    },
                    {
                        titulo: 'Plantio das Mudas',
                        descricao: 'Plante mudas por estaquia (10 cm) com espa√ßamento de 30-50 cm; evite transplantes frequentes.',
                        duracao: '25-30 minutos',
                        materiais: ['Mudas ou estacas de alecrim', 'Regador', 'Horm√¥nio enraizador (opcional)']
                    },
                    {
                        titulo: 'Rega Inicial',
                        descricao: 'Regue moderadamente na primeira semana; depois, espa√ße para 5-7 dias, tolerando seco.',
                        duracao: '10 minutos',
                        materiais: ['Regador com √°gua']
                    }
                ]
            }
        };

        let plantaAtual = '';
        let passosConcluidos = 0;
        let totalPassos = 0;

        function carregarGuiaPlantio() {
            const parametrosUrl = new URLSearchParams(window.location.search);
            const idPlanta = parametrosUrl.get('plant');

            if (!idPlanta || !guiasPlantio[idPlanta]) {
                document.getElementById('plant-name').textContent = 'Planta n√£o encontrada';
                document.getElementById('plant-description').textContent = 'Volte e selecione uma planta v√°lida.';
                return;
            }

            plantaAtual = idPlanta;
            const guia = guiasPlantio[idPlanta];

            document.getElementById('plant-name').textContent = guia.nome;
            document.getElementById('plant-description').textContent = guia.descricao;

            totalPassos = guia.passos.length;
            renderizarPassos(guia.passos);
            atualizarProgresso();
        }

        function renderizarPassos(passos) {
        const container = document.getElementById('steps-container');
        container.innerHTML = '';

        passos.forEach((passo, indice) => {
            const numeroPasso = indice + 1;
            const bloqueado = indice > 0; // Primeiro passo sempre liberado

            const htmlPasso = `
                <div class="step-card ${bloqueado ? 'locked' : ''}" id="passo-${numeroPasso}">
                    <div class="flex items-start">
                        <div class="step-number">${numeroPasso}</div>
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="text-xl font-semibold text-garden-secondary">${passo.titulo}</h3>
                                <div class="checkmark" data-passo="${numeroPasso}">
                                    ${!bloqueado ? '‚úì' : ''}
                                </div>
                            </div>
                            <p class="text-muted-foreground mb-4">${passo.descricao}</p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                <div>
                                    <strong class="text-garden-secondary">Dura√ß√£o:</strong>
                                    <span class="text-muted-foreground ml-2">${passo.duracao}</span>
                                </div>
                                <div>
                                    <strong class="text-garden-secondary">Materiais Necess√°rios:</strong>
                                    <div class="text-muted-foreground mt-1">
                                        ${passo.materiais.map(material => `
                                            <div class="flex items-center mb-1">
                                                <span class="material-icon">Pin</span>
                                                <span>${material}</span>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            container.innerHTML += htmlPasso;
        });

            // Adiciona clique nos checkmarks dos passos liberados
            document.querySelectorAll('.checkmark').forEach(marca => {
                if (!marca.closest('.step-card.locked')) {
                    marca.addEventListener('click', function () {
                        const num = parseInt(this.getAttribute('data-passo'));
                        alternarConclusaoPasso(num);
                    });
                }
            });
        }

        function alternarConclusaoPasso(numeroPasso) {
            const cardPasso = document.getElementById(`passo-${numeroPasso}`);
            const checkmark = cardPasso.querySelector('.checkmark');

            if (checkmark.classList.contains('checked')) {
                checkmark.classList.remove('checked');
                cardPasso.classList.remove('completed');
                passosConcluidos--;
            } else {
                checkmark.classList.add('checked');
                cardPasso.classList.add('completed');
                passosConcluidos++;

                // Libera o pr√≥ximo passo
                if (numeroPasso < totalPassos) {
                    const proximoCard = document.getElementById(`passo-${numeroPasso + 1}`);
                    proximoCard.classList.remove('locked');
                    proximoCard.querySelector('.checkmark').innerHTML = 'Check';

                    proximoCard.querySelector('.checkmark').addEventListener('click', function () {
                        alternarConclusaoPasso(numeroPasso + 1);
                    });
                }
            }

            atualizarProgresso();
        }


        function atualizarProgresso() {
            const progresso = (passosConcluidos / totalPassos) * 100;
            document.getElementById('progress-fill').style.width = `${progresso}%`;

            const botaoFinalizar = document.getElementById('finish-planting');
            botaoFinalizar.disabled = passosConcluidos !== totalPassos;
        }

        function gerarTarefasIniciais(tipo) {
            const tarefas = {
                alface: ['Regar hoje', 'Verificar o solo'],
                rucula: ['Regar a cada 2 dias', 'Podar folhas velhas'],
                couve: ['Regar abundantemente', 'Verificar pragas'],
                manjericao: ['Regar diariamente', 'Podar flores'],
                salsa: ['Regar a cada 2 dias', 'Colher ramos externos'],
                cebolinha: ['Regar regularmente', 'Cortar folhas'],
                alecrim: ['Regar a cada 5-7 dias', 'Podar para estimular crescimento'],
                default: ['Regar a planta', 'Verificar luz solar']
            };
            return tarefas[tipo] || tarefas.default;
        }

        function finalizarPlantio() {
            if (passosConcluidos !== totalPassos) {
                alert('Complete todos os passos antes de finalizar!');
                return;
            }

            const guia = guiasPlantio[plantaAtual];
            alert(`Parab√©ns! Voc√™ plantou ${guia.nome} com sucesso!`);

            // Redireciona para o dashboard/meu jardim
            window.location.href = 'plantacao.html';
        }

        // Eventos
        document.getElementById('finish-planting').addEventListener('click', finalizarPlantio);

        // Carrega o guia ao abrir a p√°gina
        document.addEventListener('DOMContentLoaded', carregarGuiaPlantio);
    </script>
</body>

</html>